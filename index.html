<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>äº”æ³°æˆ¿å±‹ | æˆ¿æ±è£œåŠ©è³‡æ ¼è©¦ç®—</title>
    
    <script charset="utf-8" type="text/javascript" src="https://js-na2.hsforms.net/forms/embed/v2.js"></script>
    
    <style>
        :root {
            /* äº”æ³°æˆ¿å±‹ CIS æ¨™æº–è‰² */
            --wutai-blue: #1B5C6D;   /* PANTONE 7708C æ·±è— */
            --wutai-orange: #E65C12; /* PANTONE 1595C æ©˜è‰² */
            
            --bg-color: #f8f9fa;
            --surface: #ffffff;
            --text-main: #222222; /* å­—é«”æ”¹æ·±ä¸€é»ï¼Œå¢åŠ å°æ¯” */
            --text-sub: #555555;
            --border: #e0e0e0;
        }

        body {
            /* åŸºåº•å­—é«”å¾é è¨­ 16px æ”¹ç‚º 18pxï¼Œå°é•·è¼©æ›´å‹å–„ */
            font-size: 18px; 
            font-family: "Microsoft JhengHei", "Heiti TC", sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            margin: 0;
            padding: 0;
            line-height: 1.6; /* è¡Œè·æ‹‰é–‹ */
            -webkit-tap-highlight-color: transparent;
        }

        /* --- å°èˆªåˆ— --- */
        .navbar {
            background: var(--surface);
            border-bottom: 4px solid var(--wutai-orange); /* ç·šæ¢åŠ ç²— */
            padding: 15px;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .brand-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .brand-logo-img {
            height: 40px; /* Logo ç¨å¾®æ”¾å¤§ */
            width: auto;
            display: none; 
        }

        .brand-text {
            font-weight: 900;
            font-size: 22px; /* æ¨™é¡Œå­—åŠ å¤§ */
            color: var(--wutai-blue);
            letter-spacing: 1px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 25px 15px; /* é‚Šè·åŠ å¤§ */
        }

        /* å¡ç‰‡é€šç”¨æ¨£å¼ */
        .card {
            background: var(--surface);
            border-radius: 16px; /* åœ“è§’æ›´åœ“æ½¤ */
            box-shadow: 0 4px 16px rgba(27, 92, 109, 0.1);
            padding: 30px 20px;
            margin-bottom: 30px;
            border: 1px solid var(--border);
        }

        .section-title {
            font-size: 20px; /* å€å¡Šæ¨™é¡ŒåŠ å¤§ */
            font-weight: 800;
            color: var(--wutai-blue);
            margin-bottom: 25px;
            padding-left: 12px;
            border-left: 6px solid var(--wutai-orange); /* é£¾æ¢åŠ ç²— */
        }

        .grid-2 {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px; /* é–“è·æ‹‰å¤§ */
        }
        @media (min-width: 600px) {
            .grid-2 { grid-template-columns: 1fr 1fr; }
        }

        .form-group { margin-bottom: 20px; position: relative; }
        
        .form-label {
            display: block;
            font-size: 17px; /* æ¨™ç±¤å­—åŠ å¤§ */
            font-weight: 700;
            margin-bottom: 10px;
            color: var(--text-main);
        }
        
        .form-input {
            width: 100%;
            padding: 16px; /* è¼¸å…¥æ¡†å…§è·åŠ å¤§ï¼Œæ‰‹æŒ‡å¥½é» */
            border: 2px solid #ced4da; /* é‚Šæ¡†åŠ ç²— */
            border-radius: 10px;
            font-size: 19px; /* è¼¸å…¥çš„æ•¸å­—è®Šå¤§ */
            background: #fff;
            box-sizing: border-box;
            appearance: none;
            color: #333;
        }
        .form-input:focus {
            outline: none;
            border-color: var(--wutai-blue);
            box-shadow: 0 0 0 4px rgba(27, 92, 109, 0.15);
        }

        /* è‡ªå‹•ä¼°ç®—æ¨™ç±¤ */
        .badge-auto {
            position: absolute;
            right: 15px;
            top: 52px; /* ä½ç½®å¾®èª¿ */
            background: #e0f2f1;
            color: var(--wutai-blue);
            font-size: 13px; /* æç¤ºå­—åŠ å¤§ */
            font-weight: bold;
            padding: 4px 10px;
            border-radius: 6px;
            pointer-events: none;
            display: none;
        }

        .btn-calc {
            width: 100%;
            padding: 18px; /* æŒ‰éˆ•æ›´è‚¥ */
            background: var(--wutai-orange); 
            color: white;
            font-size: 20px; /* æŒ‰éˆ•å­—åŠ å¤§ */
            font-weight: 800;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            margin-top: 10px;
            box-shadow: 0 6px 15px rgba(230, 92, 18, 0.3);
            transition: transform 0.1s;
        }
        .btn-calc:active { transform: scale(0.96); }

        #resultSection { display: none; }

        .hero-result {
            background: linear-gradient(135deg, var(--wutai-blue), #144a57);
            color: white;
            border-radius: 20px;
            padding: 35px 25px;
            text-align: center;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(27, 92, 109, 0.3);
        }
        .hero-label { font-size: 16px; opacity: 0.95; letter-spacing: 1px; font-weight: bold; }
        .hero-value { 
            font-size: 52px; /* çµæœæ•¸å­—è¶…å¤§ */
            font-weight: 800; 
            margin: 15px 0; 
            text-shadow: 0 3px 6px rgba(0,0,0,0.2);
        }

        .table-container {
            border: 1px solid var(--border);
            border-radius: 12px;
            overflow-x: auto;
        }
        .data-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 16px; /* è¡¨æ ¼å…§æ–‡å­—åŠ å¤§ */
            white-space: nowrap;
        }
        .data-table th, .data-table td {
            padding: 16px; /* è¡¨æ ¼æ ¼å­æ›´å¯¬é¬† */
            border-bottom: 1px solid var(--border);
        }
        .data-table th { 
            background: #f1f5f9; 
            text-align: left; 
            color: var(--text-sub); 
            font-weight: 700;
            font-size: 16px;
        }
        .data-table td { color: var(--text-main); font-weight: 500; }
        
        .col-item { width: 30%; font-weight: 700; }
        .col-formula { width: 45%; font-size: 13px; color: var(--text-sub); white-space: normal; line-height: 1.4; }
        .col-value { width: 25%; text-align: right; font-weight: 700; font-family: monospace; font-size: 17px; }

        .tag {
            display: inline-block; font-size: 12px; padding: 3px 8px; /* æ¨™ç±¤åŠ å¤§ */
            border-radius: 4px; margin-right: 8px; vertical-align: middle;
            font-weight: bold;
        }
        .tag-cash { background: #f0f4c3; color: #558b2f; border: 1px solid #dce775; }
        .tag-fund { background: #ffe0b2; color: #e65100; border: 1px solid #ffcc80; }

        .row-total { background: #fdfbf7; }
        .row-total td { color: var(--wutai-blue); font-weight: 900; border-top: 3px solid var(--wutai-blue); font-size: 18px; }

        /* HubSpot è¡¨å–®å®¹å™¨ */
        .hubspot-wrapper {
            background: #fff;
            border: 3px solid var(--wutai-orange); /* é‚Šæ¡†åŠ ç²— */
            border-radius: 16px;
            padding: 30px 20px;
            margin-top: 35px;
            text-align: left;
            box-shadow: 0 10px 25px rgba(230, 92, 18, 0.15);
            min-height: 150px; 
        }
        .hubspot-title {
            color: var(--wutai-orange);
            font-weight: 900;
            font-size: 24px; /* æ¨™é¡ŒåŠ å¤§ */
            margin-bottom: 10px;
            text-align: center;
        }
        .hubspot-subtitle {
            color: var(--text-main);
            font-size: 17px; /* å‰¯æ¨™åŠ å¤§ */
            text-align: center;
            margin-bottom: 25px;
            line-height: 1.6;
        }
    </style>
</head>
<body>

<div class="navbar">
    <div class="brand-container">
        <img src="logo.png" alt="äº”æ³°æˆ¿å±‹ Logo" class="brand-logo-img" style="display:none">
        
        <span class="brand-text">äº”æ³°æˆ¿å±‹ | æˆ¿æ±è£œåŠ©è©¦ç®—</span>
    </div>
</div>

<div class="container">
    
    <div class="card">
        <div class="section-title">è¼¸å…¥ç‰©æ¥­è³‡æ–™</div>
        
        <div class="form-group">
            <label class="form-label">é æœŸæ¯æœˆç§Ÿé‡‘ (å…ƒ)</label>
            <input type="text" inputmode="numeric" id="rent" class="form-input" placeholder="ä¾‹å¦‚ï¼š25000" oninput="autoEstimate()">
        </div>

        <div class="grid-2">
            <div class="form-group">
                <label class="form-label">è©¦ç®—å¹´é™</label>
                <select id="years" class="form-input">
                    <option value="1">1 å¹´</option>
                    <option value="2">2 å¹´</option>
                    <option value="3" selected>3 å¹´ (å®Œæ•´åˆç´„)</option>
                </select>
            </div>
            <div class="form-group">
                <label class="form-label">æˆ¿æ±æ‰€å¾—ç¨…ç‡</label>
                <select id="taxRate" class="form-input">
                    <option value="0.05">5%</option>
                    <option value="0.12">12%</option>
                    <option value="0.20" selected>20%</option>
                    <option value="0.30">30%</option>
                    <option value="0.40">40%</option>
                </select>
            </div>
        </div>

        <div class="grid-2">
            <div class="form-group">
                <label class="form-label">ç¾è¡Œæˆ¿å±‹ç¨… (å¹´)</label>
                <input type="text" inputmode="numeric" id="houseTax" class="form-input" oninput="userEdited('house')">
                <span id="tagHouse" class="badge-auto">è‡ªå‹•ä¼°ç®—ï¼šå¯ä¿®æ”¹</span>
            </div>
            <div class="form-group">
                <label class="form-label">ç¾è¡Œåœ°åƒ¹ç¨… (å¹´)</label>
                <input type="text" inputmode="numeric" id="landTax" class="form-input" oninput="userEdited('land')">
                <span id="tagLand" class="badge-auto">è‡ªå‹•ä¼°ç®—ï¼šå¯ä¿®æ”¹</span>
            </div>
        </div>

        <button class="btn-calc" onclick="calculate()">é–‹å§‹è©¦ç®—</button>
    </div>

    <div id="resultSection">
        
        <div class="hero-result">
            <div class="hero-label">è©¦ç®—ç¸½åƒ¹å€¼ (å«ç¨…å‹™æ¸›å…/è£œåŠ©)</div>
            <div class="hero-value" id="grandTotal">$0</div>
        </div>

        <div class="card">
            <div class="section-title">è²¡å‹™æ˜ç´°è¡¨</div>
            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th class="col-item">é …ç›®</th>
                            <th class="col-formula">è¨ˆç®—èªªæ˜</th>
                            <th class="col-value">æ•ˆç›Š</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span class="tag tag-cash">ç¾é‡‘</span>ä»²ä»‹è²»</td>
                            <td class="col-formula">ç§Ÿé‡‘Ã—1å€‹æœˆÃ—å¹´æ•¸</td>
                            <td class="col-value" id="valBrokerage">0</td>
                        </tr>
                        <tr>
                            <td><span class="tag tag-cash">ç¾é‡‘</span>ä»£ç®¡è²»</td>
                            <td class="col-formula">ç§Ÿé‡‘Ã—10%Ã—12æœˆÃ—å¹´æ•¸</td>
                            <td class="col-value" id="valManagement">0</td>
                        </tr>
                        <tr>
                            <td><span class="tag tag-cash">ç¾é‡‘</span>æ‰€å¾—ç¨…</td>
                            <td class="col-formula">ç¤¾å®…ç¨…åˆ¶å„ªæƒ å·®é¡</td>
                            <td class="col-value" id="valIncomeTax">0</td>
                        </tr>
                        <tr>
                            <td><span class="tag tag-cash">ç¾é‡‘</span>æŒæœ‰ç¨…</td>
                            <td class="col-formula">æˆ¿å±‹/åœ°åƒ¹ç¨…è‡ªç”¨æ¸›å…</td>
                            <td class="col-value" id="valHoldingTax">0</td>
                        </tr>
                        <tr class="row-total">
                            <td colspan="2">ã€Aã€‘å¯¦è³ªçœä¸‹ç¾é‡‘</td>
                            <td class="col-value" id="totalCash">0</td>
                        </tr>

                        <tr><td colspan="3" style="height:15px; border:none; background:#f9fafb;"></td></tr>

                        <tr>
                            <td><span class="tag tag-fund">è£œåŠ©</span>ä¿®ç¹•è²»</td>
                            <td class="col-formula">æ¯å¹´$15,000é¡åº¦</td>
                            <td class="col-value" id="valRepair">0</td>
                        </tr>
                        <tr>
                            <td><span class="tag tag-fund">è£œåŠ©</span>ä¿éšªè²»</td>
                            <td class="col-formula">æ¯å¹´$3,500é¡åº¦</td>
                            <td class="col-value" id="valInsurance">0</td>
                        </tr>
                        <tr>
                            <td><span class="tag tag-fund">è£œåŠ©</span>å…¬è­‰è²»</td>
                            <td class="col-formula">å–®æ¬¡ä¸Šé™$4,500Ã—å¹´æ•¸</td>
                            <td class="col-value" id="valNotary">0</td>
                        </tr>
                        <tr class="row-total" style="background:#fff3e0;">
                            <td colspan="2" style="color:#e65100; border-top: 2px solid #ffb74d;">ã€Bã€‘æ”¿åºœç¶­è­·åŸºé‡‘</td>
                            <td class="col-value" style="color:#e65100;" id="totalFund">0</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <p style="font-size:14px; color:#999; margin-top:20px; line-height:1.5; text-align: center;">
                â€» æœ¬è©¦ç®—çµæœåƒ…ä¾›åƒè€ƒï¼Œä¿®ç¹•è²»ã€å…¬è­‰è²»åŠä¿éšªè²»ç‚ºå¯¦æ”¯å¯¦ä»˜è£œåŠ©é¡åº¦ã€‚<br>
                äº”æ³°æˆ¿å±‹ä»²ä»‹æœ‰é™å…¬å¸
            </p>
        </div>

        <div class="hubspot-wrapper">
            <div class="hubspot-title">æŸ¥è©¢è£œåŠ©è³‡æ ¼</div>
            <div class="hubspot-subtitle">ç‚ºæ‚¨ç¢ºèªæ‚¨çš„æˆ¿å­æ˜¯å¦ç¬¦åˆè£œåŠ©è³‡æ ¼<br>è«‹è¼¸å…¥æ‰‹æ©Ÿï¼Œå°‡ç”±å°ˆäººç‚ºæ‚¨æœå‹™ï¼š</div>
            
            <div id="hubspot-form-target">
                </div>
        </div>

    </div>

</div>

<script>
    let isHouseEdited = false;
    let isLandEdited = false;

    // æ ¼å¼åŒ–é‡‘éŒ¢
    function formatMoney(num) {
        return "$" + Math.round(num).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
    }

    // è‡ªå‹•ä¼°ç®—ç¨…é‡‘
    function autoEstimate() {
        let rent = parseInt(document.getElementById('rent').value) || 0;
        let estHouse = Math.round(rent * 0.6); 
        let estLand = Math.round(rent * 0.15);

        if (!isHouseEdited) {
            document.getElementById('houseTax').value = rent ? estHouse : '';
            document.getElementById('tagHouse').style.display = rent ? 'block' : 'none';
        }
        if (!isLandEdited) {
            document.getElementById('landTax').value = rent ? estLand : '';
            document.getElementById('tagLand').style.display = rent ? 'block' : 'none';
        }
    }

    // æ¨™è¨˜ç”¨æˆ¶å·²æ‰‹å‹•ä¿®æ”¹
    function userEdited(type) {
        if (type === 'house') { isHouseEdited = true; document.getElementById('tagHouse').style.display = 'none'; }
        if (type === 'land') { isLandEdited = true; document.getElementById('tagLand').style.display = 'none'; }
    }

    // æ ¸å¿ƒè¨ˆç®—é‚è¼¯
    function calculate() {
        let rent = parseInt(document.getElementById('rent').value) || 0;
        if(rent === 0) { alert("è«‹è¼¸å…¥é æœŸç§Ÿé‡‘æ‰èƒ½è©¦ç®—å–”ï¼"); return; }

        let years = parseInt(document.getElementById('years').value);
        let taxRate = parseFloat(document.getElementById('taxRate').value);
        let houseTax = parseInt(document.getElementById('houseTax').value) || 0;
        let landTax = parseInt(document.getElementById('landTax').value) || 0;

        // è¨ˆç®—å„é …æ•¸å€¼
        let brokerage = rent * years; 
        let management = rent * 0.1 * 12 * years;
        let taxGeneral = (rent * 12 * 0.57) * taxRate;
        let taxSocial = Math.max(0, (rent * 12) - 180000) * 0.4 * taxRate;
        let incomeTaxSaved = (taxGeneral - taxSocial) * years;
        let houseTaxSaved = houseTax * 0.4 * years; 
        let landTaxSaved = landTax * 0.8 * years;
        let holdingTaxSaved = houseTaxSaved + landTaxSaved;
        let totalCash = brokerage + management + incomeTaxSaved + holdingTaxSaved;

        let repair = 15000 * years;
        let insurance = 3500 * years;
        let notary = 4500 * years; 
        let totalFund = repair + insurance + notary;
        let grandTotal = totalCash + totalFund;

        // æ›´æ–°ç•«é¢
        document.getElementById('grandTotal').innerText = formatMoney(grandTotal);
        document.getElementById('valBrokerage').innerText = formatMoney(brokerage);
        document.getElementById('valManagement').innerText = formatMoney(management);
        document.getElementById('valIncomeTax').innerText = formatMoney(incomeTaxSaved);
        document.getElementById('valHoldingTax').innerText = formatMoney(holdingTaxSaved);
        document.getElementById('totalCash').innerText = formatMoney(totalCash);
        document.getElementById('valRepair').innerText = formatMoney(repair);
        document.getElementById('valInsurance').innerText = formatMoney(insurance);
        document.getElementById('valNotary').innerText = formatMoney(notary);
        document.getElementById('totalFund').innerText = formatMoney(totalFund);

        let resultSec = document.getElementById('resultSection');
        resultSec.style.display = 'block';
        resultSec.scrollIntoView({ behavior: 'smooth', block: 'start' });

        // ğŸ”¥ åŸ·è¡Œ HubSpot è¡¨å–®è¼‰å…¥
        loadHubspotForm();
    }

    // è¼‰å…¥è¡¨å–® (ä½¿ç”¨æ‚¨æä¾›çš„ na2 å€åŸŸèˆ‡ ID)
    function loadHubspotForm() {
        if (window.hbspt) {
            document.getElementById('hubspot-form-target').innerHTML = ""; 
            
            hbspt.forms.create({
                region: "na2", 
                portalId: "20614802", 
                formId: "51ca362f-f180-48ac-b0b1-791454dbd5d4",
                target: "#hubspot-form-target"
            });
        } else {
            console.error("HubSpot script not loaded.");
        }
    }
</script>

</body>
</html>
